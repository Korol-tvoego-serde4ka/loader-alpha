<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Loader Alpha</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
</head>
<body class="bg-dark text-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">Minecraft Loader Alpha</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Главная</a>
                    </li>
                    <li class="nav-item" id="nav-keys">
                        <a class="nav-link" href="#keys">Мои ключи</a>
                    </li>
                    <li class="nav-item" id="nav-invites">
                        <a class="nav-link" href="#invites">Приглашения</a>
                    </li>
                    <li class="nav-item" id="nav-discord">
                        <a class="nav-link" href="#discord">Discord</a>
                    </li>
                    <li class="nav-item" id="nav-admin" style="display: none;">
                        <a class="nav-link" href="#admin">Администрирование</a>
                    </li>
                </ul>
                <div class="navbar-nav" id="login-buttons">
                    <a class="nav-link" href="#login">Вход</a>
                    <a class="nav-link" href="#register">Регистрация</a>
                </div>
                <div class="navbar-nav" id="user-info" style="display: none;">
                    <span class="nav-link" id="username-display"></span>
                    <a class="nav-link" href="#" id="logout-button">Выход</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Главная страница -->
        <div id="home-page" class="page-content">
            <div class="jumbotron bg-secondary text-white">
                <h1 class="display-4">Minecraft Loader Alpha</h1>
                <p class="lead">Система лоадера для Minecraft с авторизацией по ключам и интеграцией с Discord</p>
                <hr class="my-4">
                <p>Для использования лоадера необходимо зарегистрироваться на сайте и активировать ключ.</p>
                <p>Новым пользователям выдается тестовый ключ на 24 часа.</p>
                <div id="home-buttons">
                    <a class="btn btn-primary btn-lg" href="#login" role="button">Войти</a>
                    <a class="btn btn-success btn-lg" href="#register" role="button">Зарегистрироваться</a>
                </div>
                <div id="download-button" style="display: none;">
                    <a class="btn btn-primary btn-lg" href="downloads/minecraft-loader-alpha.exe" role="button">Скачать лоадер</a>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="card bg-secondary mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Авторизация по ключам</h5>
                            <p class="card-text">Лоадер использует систему авторизации по ключам, что обеспечивает высокий уровень безопасности.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card bg-secondary mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Интеграция с Discord</h5>
                            <p class="card-text">Привяжите свой аккаунт Discord для получения доступа к уникальным возможностям и управления ключами.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card bg-secondary mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Система приглашений</h5>
                            <p class="card-text">Регистрация только по приглашениям от существующих пользователей гарантирует безопасность сообщества.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Страница входа -->
        <div id="login-page" class="page-content" style="display: none;">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card bg-secondary">
                        <div class="card-header">
                            <h4>Вход в систему</h4>
                        </div>
                        <div class="card-body">
                            <form id="login-form">
                                <div class="form-group">
                                    <label for="login-username">Имя пользователя</label>
                                    <input type="text" class="form-control" id="login-username" required>
                                </div>
                                <div class="form-group">
                                    <label for="login-password">Пароль</label>
                                    <input type="password" class="form-control" id="login-password" required>
                                </div>
                                <div class="alert alert-danger" id="login-error" style="display: none;"></div>
                                <button type="submit" class="btn btn-primary">Войти</button>
                            </form>
                        </div>
                        <div class="card-footer">
                            <a href="#register">Нет аккаунта? Зарегистрируйтесь</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Страница регистрации -->
        <div id="register-page" class="page-content" style="display: none;">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="card bg-secondary">
                        <div class="card-header">
                            <h4>Регистрация</h4>
                        </div>
                        <div class="card-body">
                            <form id="register-form">
                                <div class="form-group">
                                    <label for="register-username">Имя пользователя</label>
                                    <input type="text" class="form-control" id="register-username" required>
                                </div>
                                <div class="form-group">
                                    <label for="register-email">Email</label>
                                    <input type="email" class="form-control" id="register-email" required>
                                </div>
                                <div class="form-group">
                                    <label for="register-password">Пароль</label>
                                    <input type="password" class="form-control" id="register-password" required>
                                </div>
                                <div class="form-group">
                                    <label for="register-invite">Код приглашения</label>
                                    <input type="text" class="form-control" id="register-invite" required>
                                </div>
                                <div class="alert alert-danger" id="register-error" style="display: none;"></div>
                                <button type="submit" class="btn btn-success">Зарегистрироваться</button>
                            </form>
                        </div>
                        <div class="card-footer">
                            <a href="#login">Уже есть аккаунт? Войдите</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Страница ключей -->
        <div id="keys-page" class="page-content" style="display: none;">
            <h2>Мои ключи</h2>
            <div class="alert alert-info">
                Здесь отображаются все ваши активные ключи. Для использования ключа в лоадере, скопируйте его и вставьте в соответствующее поле.
            </div>
            
            <div class="card bg-secondary mb-4">
                <div class="card-header">
                    <h4>Активные ключи</h4>
                </div>
                <div class="card-body">
                    <div id="keys-loading" class="text-center">
                        <div class="spinner-border text-light" role="status">
                            <span class="sr-only">Загрузка...</span>
                        </div>
                    </div>
                    <div id="no-keys" style="display: none;">
                        <p>У вас нет активных ключей.</p>
                    </div>
                    <div id="keys-list" style="display: none;">
                        <div class="table-responsive">
                            <table class="table table-dark table-compact">
                                <thead>
                                    <tr>
                                        <th>Ключ</th>
                                        <th>Создан</th>
                                        <th>Истекает</th>
                                        <th>Осталось</th>
                                    </tr>
                                </thead>
                                <tbody id="keys-table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card bg-secondary">
                <div class="card-header">
                    <h4>Активация ключа</h4>
                </div>
                <div class="card-body">
                    <form id="redeem-key-form">
                        <div class="form-group">
                            <label for="redeem-key">Ключ</label>
                            <input type="text" class="form-control" id="redeem-key" placeholder="XXXX-XXXX-XXXX-XXXX" required>
                        </div>
                        <div class="alert alert-danger" id="redeem-error" style="display: none;"></div>
                        <div class="alert alert-success" id="redeem-success" style="display: none;">Ключ успешно активирован!</div>
                        <button type="submit" class="btn btn-primary">Активировать</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Страница приглашений -->
        <div id="invites-page" class="page-content" style="display: none;">
            <h2>Приглашения</h2>
            <div class="alert alert-info">
                Вы можете создать приглашения для новых пользователей. Срок действия приглашения - 30 дней.
            </div>
            
            <!-- Информация о лимитах инвайтов -->
            <div class="card bg-secondary mb-4" id="invite-limits" style="display: none;">
                <div class="card-header">
                    <h4>Лимиты приглашений</h4>
                </div>
                <div class="card-body">
                    <p>Ваш лимит приглашений в месяц: <span id="monthly-limit">0</span></p>
                    <p>Использовано в этом месяце: <span id="used-invites">0</span></p>
                    <p>Осталось в этом месяце: <span id="remaining-invites">0</span></p>
                </div>
            </div>
            
            <!-- Управление лимитами (для админов) -->
            <div class="card bg-secondary mb-4" id="admin-invite-limits" style="display: none;">
                <div class="card-header">
                    <h4>Управление лимитами приглашений</h4>
                </div>
                <div class="card-body">
                    <form id="set-invite-limits-form">
                        <div class="form-group">
                            <label for="admin-limit-value">Лимит для администраторов:</label>
                            <input type="number" class="form-control" id="admin-limit-value" min="0" value="999">
                        </div>
                        <div class="form-group">
                            <label for="support-limit-value">Лимит для саппортов:</label>
                            <input type="number" class="form-control" id="support-limit-value" min="0" value="10">
                        </div>
                        <div class="form-group">
                            <label for="user-limit-value">Лимит для пользователей:</label>
                            <input type="number" class="form-control" id="user-limit-value" min="0" value="0">
                        </div>
                        <div class="alert alert-danger" id="set-limits-error" style="display: none;"></div>
                        <div class="alert alert-success" id="set-limits-success" style="display: none;">Лимиты успешно обновлены</div>
                        <button type="submit" class="btn btn-primary">Сохранить</button>
                    </form>
                </div>
            </div>
            
            <div class="card bg-secondary mb-4">
                <div class="card-header">
                    <h4>Мои приглашения</h4>
                </div>
                <div class="card-body">
                    <div id="invites-loading" class="text-center">
                        <div class="spinner-border text-light" role="status">
                            <span class="sr-only">Загрузка...</span>
                        </div>
                    </div>
                    <div id="no-invites" style="display: none;">
                        <p>У вас нет приглашений.</p>
                    </div>
                    <div id="invites-list" style="display: none;">
                        <div class="table-responsive">
                            <table class="table table-dark table-compact">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="select-all-invites" title="Выбрать все"></th>
                                        <th>Код</th>
                                        <th>Создан</th>
                                        <th>Истекает</th>
                                        <th>Статус</th>
                                        <th>Создатель</th>
                                        <th>Использован</th>
                                        <th id="invites-actions-header" style="display: none;">Действия</th>
                                    </tr>
                                </thead>
                                <tbody id="invites-table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <button id="generate-invite-button" class="btn btn-primary">Создать приглашение</button>
                    <button id="delete-selected-invites-button" class="btn btn-danger ml-2" style="display: none;">Удалить выбранные</button>
                </div>
            </div>
        </div>

        <!-- Страница Discord -->
        <div id="discord-page" class="page-content" style="display: none;">
            <h2>Интеграция с Discord</h2>
            <div class="alert alert-info">
                Привяжите свой аккаунт Discord для получения доступа к дополнительным возможностям и управления ключами через бота.
            </div>
            
            <div class="card bg-secondary mb-4">
                <div class="card-header">
                    <h4>Статус привязки</h4>
                </div>
                <div class="card-body">
                    <div id="discord-status-loading" class="text-center">
                        <div class="spinner-border text-light" role="status">
                            <span class="sr-only">Загрузка...</span>
                        </div>
                    </div>
                    <div id="discord-not-linked" style="display: none;">
                        <p>Ваш аккаунт не привязан к Discord.</p>
                        <button id="generate-discord-code-button" class="btn btn-primary">Сгенерировать код для привязки</button>
                    </div>
                    <div id="discord-linked" style="display: none;">
                        <p>Ваш аккаунт привязан к Discord: <span id="discord-username"></span></p>
                    </div>
                </div>
            </div>
            
            <div id="discord-code-card" class="card bg-secondary" style="display: none;">
                <div class="card-header">
                    <h4>Код для привязки</h4>
                </div>
                <div class="card-body">
                    <p>Используйте следующий код с командой бота <code>/code</code> для привязки аккаунта:</p>
                    <div class="alert alert-primary">
                        <h3 class="text-center" id="discord-code"></h3>
                    </div>
                    <p>Код действителен в течение 15 минут.</p>
                </div>
            </div>
            
            <div class="card bg-secondary mt-4">
                <div class="card-header">
                    <h4>Команды бота</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-dark table-compact">
                            <thead>
                                <tr>
                                    <th>Команда</th>
                                    <th>Описание</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>/code &lt;код&gt;</code></td>
                                    <td>Привязка аккаунта сайта к Discord</td>
                                </tr>
                                <tr>
                                    <td><code>/redeem &lt;ключ&gt;</code></td>
                                    <td>Активация ключа</td>
                                </tr>
                                <tr>
                                    <td><code>/status</code></td>
                                    <td>Проверка статуса подписки</td>
                                </tr>
                                <tr id="admin-commands" style="display: none;">
                                    <td colspan="2"><strong>Команды для администраторов и саппорта:</strong></td>
                                </tr>
                                <tr class="admin-command" style="display: none;">
                                    <td><code>/genkey [продолжительность]</code></td>
                                    <td>Генерация ключа</td>
                                </tr>
                                <tr class="admin-command" style="display: none;">
                                    <td><code>/ban &lt;имя_пользователя&gt;</code></td>
                                    <td>Бан пользователя</td>
                                </tr>
                                <tr class="admin-command" style="display: none;">
                                    <td><code>/unban &lt;имя_пользователя&gt;</code></td>
                                    <td>Разбан пользователя</td>
                                </tr>
                                <tr class="admin-command" style="display: none;">
                                    <td><code>/user &lt;имя_пользователя&gt;</code></td>
                                    <td>Информация о пользователе</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Страница администрирования -->
        <div id="admin-page" class="page-content" style="display: none;">
            <h2>Администрирование</h2>
            <div class="alert alert-warning">
                Эта страница доступна только для администраторов и саппорта.
            </div>
            
            <ul class="nav nav-tabs" id="adminTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="users-tab" data-toggle="tab" href="#users" role="tab">Пользователи</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="keys-tab" data-toggle="tab" href="#keys-admin" role="tab">Ключи</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="all-keys-tab" data-toggle="tab" href="#all-keys" role="tab">Все ключи</a>
                </li>
            </ul>
            
            <div class="tab-content" id="adminTabsContent">
                <div class="tab-pane fade show active" id="users" role="tabpanel">
                    <div class="card bg-secondary mt-4">
                        <div class="card-header">
                            <h4>Список пользователей</h4>
                        </div>
                        <div class="card-body">
                            <div id="users-loading" class="text-center">
                                <div class="spinner-border text-light" role="status">
                                    <span class="sr-only">Загрузка...</span>
                                </div>
                            </div>
                            <div id="users-list" style="display: none;">
                                <div class="table-responsive">
                                    <table class="table table-dark table-compact">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Имя пользователя</th>
                                                <th>Email</th>
                                                <th>Роль</th>
                                                <th>Discord</th>
                                                <th>Статус</th>
                                                <th>Последний вход</th>
                                                <th>IP-адрес</th>
                                                <th>Действия</th>
                                            </tr>
                                        </thead>
                                        <tbody id="users-table-body">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="keys-admin" role="tabpanel">
                    <div class="card bg-secondary mt-4">
                        <div class="card-header">
                            <h4>Генерация ключей</h4>
                        </div>
                        <div class="card-body">
                            <form id="generate-key-form">
                                <div class="form-group">
                                    <label for="key-duration">Продолжительность (часов)</label>
                                    <input type="number" class="form-control" id="key-duration" value="24" min="1" max="8760" required>
                                </div>
                                <div class="form-group">
                                    <label for="key-user">Пользователь (ID, оставьте пустым для свободного ключа)</label>
                                    <input type="number" class="form-control" id="key-user">
                                </div>
                                <div class="form-group">
                                    <label for="key-custom">Пользовательский ключ (опционально)</label>
                                    <input type="text" class="form-control" id="key-custom" placeholder="XXXX-XXXX-XXXX-XXXX">
                                    <small class="form-text text-muted">Оставьте пустым для генерации случайного ключа</small>
                                </div>
                                <div class="alert alert-danger" id="generate-key-error" style="display: none;"></div>
                                <div class="alert alert-success" id="generate-key-success" style="display: none;">
                                    Ключ успешно сгенерирован: <strong id="generated-key"></strong>
                                </div>
                                <button type="submit" class="btn btn-primary">Сгенерировать</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane fade" id="all-keys" role="tabpanel">
                    <div class="card bg-secondary mt-4">
                        <div class="card-header">
                            <h4>Все ключи</h4>
                        </div>
                        <div class="card-body">
                            <div id="all-keys-loading" class="text-center">
                                <div class="spinner-border text-light" role="status">
                                    <span class="sr-only">Загрузка...</span>
                                </div>
                            </div>
                            <div id="all-keys-list" style="display: none;">
                                <div class="mb-3">
                                    <button id="revoke-selected-keys-button" class="btn btn-danger btn-sm">Отозвать выбранные</button>
                                    <button id="restore-selected-keys-button" class="btn btn-success btn-sm ml-2">Восстановить выбранные</button>
                                    <button id="delete-selected-keys-button" class="btn btn-dark btn-sm ml-2">Удалить выбранные</button>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-dark table-compact">
                                        <thead>
                                            <tr>
                                                <th><input type="checkbox" id="select-all-keys" title="Выбрать все"></th>
                                                <th>ID</th>
                                                <th>Ключ</th>
                                                <th>Создан</th>
                                                <th>Истекает</th>
                                                <th>Остаток времени</th>
                                                <th>Владелец</th>
                                                <th>Статус</th>
                                                <th>Действия</th>
                                            </tr>
                                        </thead>
                                        <tbody id="all-keys-table-body">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white mt-5 p-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Minecraft Loader Alpha</h5>
                    <p>Система лоадера для Minecraft с авторизацией по ключам и интеграцией с Discord</p>
                </div>
                <div class="col-md-6 text-md-right">
                    <p>&copy; 2024 Minecraft Loader Alpha. Все права защищены.</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 